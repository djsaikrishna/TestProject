import{cD as $,e,ak as u,au as p,k,j as b,aI as g,a4 as I,a3 as f,r as _,aK as y,cV as l,ay as v,S as i,c1 as C,as as M,at as L,ac as S,a as E,E as d,a0 as m,cv as G,l as h,bL as O,bM as z}from"./index.44cc2916.js";import{b as A}from"./Folder.869f3811.js";import{u as F}from"./index.db28835d.js";import{I as H}from"./ImageWithError.c6a59453.js";import{O as K,g as P}from"./icon.a6605f97.js";import{G as T}from"./GridItem.67d74a8f.js";import"./Layout.3d86709f.js";import"./index.0d8a97e9.js";import"./FolderTree.191789d6.js";import"./index.1fd0ea24.js";import"./video_box.b7d1447d.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./Paginator.57c5ed74.js";import"./index.2f3d6e03.js";const V=t=>{const{isHide:s}=$();if(s(t.obj)||t.obj.type!==K.IMAGE)return null;const{setPathAs:o}=F(),r=e(p,{get color(){return u()},boxSize:"$12",get as(){return P(t.obj)}}),[a,c]=k(!1),j=b(()=>g()&&(a()||t.obj.selected)),{show:w}=A({id:1}),{rawLink:x}=I();return e(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(f,{w:"$full",class:"image-item",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${u()}`}},onMouseEnter:()=>{c(!0),o(t.obj.name,t.obj.is_dir,!0)},onMouseLeave:()=>{c(!1)},onContextMenu:n=>{_(()=>{y(!1),l(t.index,!0,!0)}),w(n,{props:t.obj})},get children(){return e(v,{w:"$full",pos:"relative",get children(){return[e(i,{get when(){return j()},get children(){return e(C,{pos:"absolute",left:"$1",top:"$1",get checked(){return t.obj.selected},onChange:n=>{l(t.index,n.target.checked)}})}}),e(H,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(M,{size:"lg"})},fallbackErr:r,get src(){return x(t.obj)},loading:"lazy",cursor:"pointer","on:click":n=>{if(!g()||n.altKey){L.emit("gallery",t.obj.name);return}l(t.index,!t.obj.selected)}})]}})}})}})},re=t=>{const s=E(),o=b(()=>e(G,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(d,{get each(){return m.objs.filter(r=>r.is_dir)},children:(r,a)=>e(T,{obj:r,get index(){return a()}})})}}));return e(f,{spacing:"$2",w:"$full",get children(){return[e(i,{get when(){return h.show_folder_in_image_view==="top"},get children(){return o()}}),e(i,{get when(){return t.images.length>0},get fallback(){return e(O,{m:"$2",get children(){return s("home.no_images")}})},get children(){return e(z,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(d,{get each(){return m.objs},children:(r,a)=>e(V,{obj:r,get index(){return a()}})})}})}}),e(i,{get when(){return h.show_folder_in_image_view==="bottom"},get children(){return o()}})]}})};export{re as default};
